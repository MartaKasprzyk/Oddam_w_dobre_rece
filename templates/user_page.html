{% extends 'base.html' %}

{% block content %}
    <section>
      <h2>Twoje dane</h2>
        <div class="user-page"><b>Imię: </b> {{ user.first_name }}</div><br>
        <div class="user-page"><b>Nazwisko: </b> {{ user.last_name }}</div><br>
        <div class="user-page"><b>E-mail: </b> {{ user.username }}</div><br>
    </section>

    <section>
        <h2>Twoje dary</h2>
        <table class="donation-table">
            <thead>
                <th>Data utworzenia</th>
                <th>Przekazane dary</th>
                <th>Ilość worków</th>
                <th>Organizacja</th>
                <th>Adres odbioru</th>
                <th>Termin odbioru</th>
                <th>Numer telefonu</th>
                <th>Komentarz dla kuriera</th>
                <th>Czy dary zostały odebrane?</th>
            </thead>
            <tbody>
            {% for donation in donations %}
                <tr>
                    <td>{{ donation.created }}</td>
                    <td>{% for category in donation.categories.all %}
                        {{ category }},
                    {% endfor %}</td>
                    <td>{{ donation.quantity }}</td>
                    <td>{{ donation.institution.name }}</td>
                    <td>{{ donation.address }}, {{ donation.city }} {{ donation.zip_code }}</td>
                    <td>{{ donation.pick_up_date }} {{ donation.pick_up_time }}</td>
                    <td>{{ donation.phone_number }}</td>
                    <td>{% if donation.pick_up_comment == '' %}
                        {{ 'Brak komentarza' }}
                        {% else %} 
                        {{ donation.pick_up_comment }}
                        {% endif %}</td>
                    <td>{{ donation.get_is_taken_display }} <br>
                        <button class="btn">
                         <a class="style" href="{% url "donation_update_status" pk=donation.pk %}">Zaktualizuj</a>
                        </button></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </section>
{% endblock content %}